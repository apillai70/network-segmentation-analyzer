graph TD
    %% ALIBABA Architecture Diagram (Vertical Layout)

    subgraph UPSTREAM["‚¨ÜÔ∏è UPSTREAM SOURCES"]
        UP0["ALIBABA<br/>1 flows"]:::upstream
        UP1["ANSIBLE<br/>2 flows"]:::upstream
        UP2["APIGTW<br/>3 flows"]:::upstream
    end

    subgraph CENTER["ALIBABA APPLICATION"]
        subgraph NLB["‚öñÔ∏è NETWORK LOAD BALANCER (Inferred)"]
            NLB_NODE["External/Internal Gateway<br/>Distributes traffic to Web Tier"]:::loadbalancer
        end
        subgraph WEB["üåê WEB TIER"]
            W0["10.164.92.168<br/>(vmhost-02.rgbk.com)"]:::web
            W1["192.168.1.100<br/>(WEB-SERVER-01.corp.local)"]:::web
        end
        subgraph ALB["‚öñÔ∏è APPLICATION LOAD BALANCER (Inferred)"]
            ALB_NODE["Internal Gateway/API Gateway<br/>Distributes traffic to App Tier"]:::loadbalancer
        end
        subgraph APP["‚öôÔ∏è APPLICATION TIER"]
            A0["10.10.10.52<br/>(APP-VM-01.rgbk.com)"]:::app
            A1["172.16.0.13<br/>(APP-VM-01.rgbk.com)"]:::app
            AMORE["... (+1 more)"]:::appmore
            click AMORE showAppServers
        end
        subgraph DB["üóÑÔ∏è DATABASE TIER"]
            D0["10.164.92.166<br/>(host01.rgbk.com)"]:::database
            D1["172.16.0.12<br/>(vmhost-02.rgbk.com)"]:::database
            DMORE["... (+9 more)"]:::dbmore
            click DMORE showDatabaseServers
        end
        subgraph OTHER["üñ•Ô∏è OTHER SERVICES"]
            OTH_Domain_Controller["Domain Controller<br/>4 servers"]:::other
        end
    end

    EXTERNAL["üåç EXTERNAL / INTERNET<br/>12 destinations | 19 flows"]:::external

    UP0 --> CENTER
    UP1 --> CENTER
    UP2 --> CENTER
    CENTER --> EXTERNAL

    %% Styles (thinner strokes for professional appearance)
    classDef upstream fill:#E3F2FD,stroke:#1976D2,stroke-width:1.5px,color:#000
    classDef web fill:#4CAF50,stroke:#2E7D32,stroke-width:2px,color:#fff
    classDef webmore fill:#81C784,stroke:#2E7D32,stroke-width:1.5px,stroke-dasharray:5,color:#fff
    classDef app fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#fff
    classDef appmore fill:#FFB74D,stroke:#E65100,stroke-width:1.5px,stroke-dasharray:5,color:#fff
    classDef database fill:#9C27B0,stroke:#6A1B9A,stroke-width:2px,color:#fff
    classDef dbmore fill:#BA68C8,stroke:#6A1B9A,stroke-width:1.5px,stroke-dasharray:5,color:#fff
    classDef loadbalancer fill:#FFF,stroke:#F44336,stroke-width:2px,color:#000
    classDef other fill:#607D8B,stroke:#37474F,stroke-width:1.5px,color:#fff
    classDef downstream fill:#2196F3,stroke:#1565C0,stroke-width:1.5px,color:#fff
    classDef external fill:#F44336,stroke:#C62828,stroke-width:1.5px,color:#fff

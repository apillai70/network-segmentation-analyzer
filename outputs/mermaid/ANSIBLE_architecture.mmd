graph TD
    %% ANSIBLE Architecture Diagram (Vertical Layout)

    subgraph UPSTREAM["‚¨ÜÔ∏è UPSTREAM SOURCES"]
        UP0["ANSIBLE<br/>2 flows"]:::upstream
        UP1["APACHE<br/>1 flows"]:::upstream
    end

    subgraph CENTER["ANSIBLE APPLICATION"]
        subgraph NLB["‚öñÔ∏è NETWORK LOAD BALANCER (Inferred)"]
            NLB_NODE["External/Internal Gateway<br/>Distributes traffic to Web Tier"]:::loadbalancer
        end
        subgraph WEB["üåê WEB TIER"]
            W0["10.100.246.20<br/>(WEB-SERVER-01.corp.local)"]:::web
            W1["192.168.1.102<br/>(WEB-VM-01.rgbk.com)"]:::web
            WMORE["... (+1 more)"]:::webmore
            click WMORE showWebServers
        end
        subgraph ALB["‚öñÔ∏è APPLICATION LOAD BALANCER (Inferred)"]
            ALB_NODE["Internal Gateway/API Gateway<br/>Distributes traffic to App Tier"]:::loadbalancer
        end
        subgraph APP["‚öôÔ∏è APPLICATION TIER"]
            A0["192.168.1.103<br/>(APP-SERVER-01.rgbk.com)"]:::app
            A1["10.164.92.169<br/>(API-GATEWAY.rgbk.com)"]:::app
            AMORE["... (+2 more)"]:::appmore
            click AMORE showAppServers
        end
        subgraph DB["üóÑÔ∏è DATABASE TIER"]
            D0["10.164.92.166<br/>(host01.rgbk.com)"]:::database
            D1["172.16.0.12<br/>(DB-SERVER-01.rgbk.com)"]:::database
            DMORE["... (+3 more)"]:::dbmore
            click DMORE showDatabaseServers
        end
    end

    subgraph DOWNSTREAM["‚¨áÔ∏è DOWNSTREAM DESTINATIONS"]
        DOWN0["ALIBABA<br/>2 servers | 2 flows"]:::downstream
    end

    EXTERNAL["üåç EXTERNAL / INTERNET<br/>5 destinations | 8 flows"]:::external

    UP0 --> CENTER
    UP1 --> CENTER
    CENTER --> DOWN0
    CENTER --> EXTERNAL

    %% Styles (thinner strokes for professional appearance)
    classDef upstream fill:#E3F2FD,stroke:#1976D2,stroke-width:1.5px,color:#000
    classDef web fill:#4CAF50,stroke:#2E7D32,stroke-width:2px,color:#fff
    classDef webmore fill:#81C784,stroke:#2E7D32,stroke-width:1.5px,stroke-dasharray:5,color:#fff
    classDef app fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#fff
    classDef appmore fill:#FFB74D,stroke:#E65100,stroke-width:1.5px,stroke-dasharray:5,color:#fff
    classDef database fill:#9C27B0,stroke:#6A1B9A,stroke-width:2px,color:#fff
    classDef dbmore fill:#BA68C8,stroke:#6A1B9A,stroke-width:1.5px,stroke-dasharray:5,color:#fff
    classDef loadbalancer fill:#FFF,stroke:#F44336,stroke-width:2px,color:#000
    classDef other fill:#607D8B,stroke:#37474F,stroke-width:1.5px,color:#fff
    classDef downstream fill:#2196F3,stroke:#1565C0,stroke-width:1.5px,color:#fff
    classDef external fill:#F44336,stroke:#C62828,stroke-width:1.5px,color:#fff
